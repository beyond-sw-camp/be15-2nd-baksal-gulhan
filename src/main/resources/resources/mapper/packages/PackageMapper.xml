<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hanhwa_tae.gulhan.packages.query.mapper.PackageMapper">

    <!-- 패키지 목록 조회 -->
    <select id="selectPackages" resultType="com.hanhwa_tae.gulhan.packages.query.dto.response.PackageResponse">
        SELECT
        package_id,
        title,
        price,
        start_date,
        end_date
        FROM package
        WHERE is_deleted = 'N'
<!--        <if "location">-->
<!--            AND -->
<!--        </if>-->
        <!-- location, date 등의 필터 조건 추가 가능 -->
        LIMIT #{limit} OFFSET #{offset}
    </select>

    <!-- 목록 개수 조회 -->
    <select id="countPackages" resultType="long">
        SELECT COUNT(*)
        FROM package
        WHERE is_deleted = 'N'
    </select>

    <!-- 패키지 상세 조회 -->
    <select id="selectPackageById" resultType="com.hanhwa_tae.gulhan.packages.query.dto.response.PackageResponse">
        SELECT
            package_id,
            title,
            price,
            detail,
            capacity,
            current_regist,
            start_date,
            end_date,
            create_at,
            guide_name,
            guide_phone
        FROM package
        WHERE package_id = #{packageId}
          AND is_deleted = 'N'
    </select>

</mapper>
