<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hanhwa_tae.gulhan.user.query.mapper.UserMapper">
    <select id="findRankIdByRankName" resultType="com.hanhwa_tae.gulhan.user.command.domain.aggregate.Rank">
        SELECT rank_id FROM rank WHERE rank_name = #{ rankName }
    </select>

<!--    <resultMap type="com.hanhwa_tae.gulhan.user.command.domain.aggregate.User" id="Rank">-->
<!--        <result column="">-->
<!--    </resultMap>>-->

    <select id="findUserByUserId" resultType="com.hanhwa_tae.gulhan.user.command.domain.aggregate.User">
        SELECT
              a.user_id
            , a.password
            , b.rank_id as "rank.rank_id"
            , b.rank_name as "rank.rank_name"
        FROM user a
        JOIN rank b ON (a.rank_id=b.rank_id)
        JOIN user_info c ON (a.user_id = c.user_id)
        WHERE user_id = #{ userId }
          AND c.is_deleted = 'N';
    </select>
    <select id="findUserByUserId" resultType="com.hanhwa_tae.gulhan.user.command.domain.aggregate.User">
        SELECT
        a.user_id
        , a.password
        , b.rank_id as "rank.rank_id"
        , b.rank_name as "rank.rank_name"
        FROM user a
        JOIN rank b ON (a.rank_id=b.rank_id)
        JOIN user_info c ON (a.user_id = c.user_id)
        WHERE user_id = #{ userId }
          AND c.is_deleted = 'N';
    </select>
</mapper>